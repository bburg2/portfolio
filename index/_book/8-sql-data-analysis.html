<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="8 SQL data analysis | _main.knit" />
<meta property="og:type" content="book" />




<meta name="author" content="Bas" />

<meta name="date" content="2022-05-06" />


<meta name="description" content="8 SQL data analysis | _main.knit">

<title>8 SQL data analysis | _main.knit</title>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="darkdown.css, css\toc.css" type="text/css" />

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
/* show arrow before summary tag as in bootstrap
TODO: remove if boostrap in updated in html_document (rmarkdown#1485) */
details > summary {
  display: list-item;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#about-me"><span class="toc-section-number">1</span> About me</a></li>
<li><a href="2-resume.html#resume"><span class="toc-section-number">2</span> Resume</a></li>
<li class="has-sub"><a href="3-project-introduction.html#project-introduction"><span class="toc-section-number">3</span> Project Introduction</a>
<ul>
<li><a href="3-project-introduction.html#introductie"><span class="toc-section-number">3.0.1</span> Introductie</a></li>
<li><a href="3-project-introduction.html#about-the-project"><span class="toc-section-number">3.0.2</span> about the project</a></li>
<li><a href="3-project-introduction.html#bibliography"><span class="toc-section-number">3.0.3</span> Bibliography</a></li>
</ul></li>
<li><a href="4-data-managment.html#data-managment"><span class="toc-section-number">4</span> Data managment</a></li>
<li><a href="5-example-data-analysis.html#example-data-analysis"><span class="toc-section-number">5</span> Example Data Analysis</a></li>
<li class="has-sub"><a href="6-reproducibility.html#reproducibility"><span class="toc-section-number">6</span> Reproducibility</a>
<ul>
<li class="has-sub"><a href="6.1-working-with-articles.html#working-with-articles"><span class="toc-section-number">6.1</span> Working with articles</a>
<ul>
<li><a href="6.1-working-with-articles.html#article-references"><span class="toc-section-number">6.1.1</span> Article References</a></li>
<li><a href="6.1-working-with-articles.html#criteria-article"><span class="toc-section-number">6.1.2</span> Criteria article</a></li>
<li><a href="6.1-working-with-articles.html#other-data"><span class="toc-section-number">6.1.3</span> Other data</a></li>
<li><a href="6.1-working-with-articles.html#extras-about-the-article"><span class="toc-section-number">6.1.4</span> Extra’s about the article</a></li>
</ul></li>
<li><a href="6.2-working-with-code-from-articles.html#working-with-code-from-articles"><span class="toc-section-number">6.2</span> Working with code from articles</a></li>
</ul></li>
<li class="has-sub"><a href="7-plan-for-learning-on-my-own.html#plan-for-learning-on-my-own"><span class="toc-section-number">7</span> Plan for learning on my own</a>
<ul>
<li><a href="7-plan-for-learning-on-my-own.html#what-i-want-to-learn"><span class="toc-section-number">7.0.1</span> What I want to learn</a></li>
<li><a href="7-plan-for-learning-on-my-own.html#my-plan-to-learn-python"><span class="toc-section-number">7.0.2</span> My plan to learn python</a></li>
</ul></li>
<li><a href="8-sql-data-analysis.html#sql-data-analysis"><span class="toc-section-number">8</span> SQL data analysis</a></li>
<li class="has-sub"><a href="9-package-creation.html#package-creation"><span class="toc-section-number">9</span> Package creation</a>
<ul>
<li><a href="9.1-description.html#description"><span class="toc-section-number">9.1</span> description</a></li>
<li><a href="9.2-installation.html#installation"><span class="toc-section-number">9.2</span> installation</a></li>
</ul></li>
<li><a href="10-working-with-parameters.html#working-with-parameters"><span class="toc-section-number">10</span> Working with parameters</a></li>
<li><a href="11-references.html#references"><span class="toc-section-number">11</span> References</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="sql-data-analysis" class="section level1" number="8">
<h1><span class="header-section-number">8</span> SQL data analysis</h1>
<p>In this report I add three different datasets to an sql database and join the table together.
With this data I make three different graphs to show my skill in R and SQL.</p>
<p>First thing is loading all the packages I use</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="8-sql-data-analysis.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb67-2"><a href="8-sql-data-analysis.html#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb67-3"><a href="8-sql-data-analysis.html#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb67-4"><a href="8-sql-data-analysis.html#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb67-5"><a href="8-sql-data-analysis.html#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb67-6"><a href="8-sql-data-analysis.html#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span></code></pre></div>
<p>Here I load the data with the use of the “read_csv” command and the “here package”</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="8-sql-data-analysis.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Laden van flu data en de eerste 10 rows skippen</span></span>
<span id="cb68-2"><a href="8-sql-data-analysis.html#cb68-2" aria-hidden="true" tabindex="-1"></a>flu_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>,<span class="st">&quot;flu_data.csv&quot;</span>), <span class="at">skip =</span> <span class="dv">10</span>)</span>
<span id="cb68-3"><a href="8-sql-data-analysis.html#cb68-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-4"><a href="8-sql-data-analysis.html#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Laden van denque data en de eerste 10 rows skippen</span></span>
<span id="cb68-5"><a href="8-sql-data-analysis.html#cb68-5" aria-hidden="true" tabindex="-1"></a>dengue_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>,<span class="st">&quot;dengue_data.csv&quot;</span>), <span class="at">skip =</span> <span class="dv">10</span>)</span>
<span id="cb68-6"><a href="8-sql-data-analysis.html#cb68-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-7"><a href="8-sql-data-analysis.html#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Laden van gampinder in gampinder (niet nuttig).</span></span>
<span id="cb68-8"><a href="8-sql-data-analysis.html#cb68-8" aria-hidden="true" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> gapminder</span></code></pre></div>
<p>Here a make the tables tidy, this for later use (is easier to work with tidy data).</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="8-sql-data-analysis.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># gapminder zelfde colnaam geven</span></span>
<span id="cb69-2"><a href="8-sql-data-analysis.html#cb69-2" aria-hidden="true" tabindex="-1"></a>gapminder_tidy <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">Date =</span> year)</span>
<span id="cb69-3"><a href="8-sql-data-analysis.html#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="8-sql-data-analysis.html#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="co"># flu_data tidy maken</span></span>
<span id="cb69-5"><a href="8-sql-data-analysis.html#cb69-5" aria-hidden="true" tabindex="-1"></a>flu_data_tidy <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(<span class="at">data =</span> flu_data, <span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(<span class="st">&quot;Date&quot;</span>), <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;cases&quot;</span>)</span>
<span id="cb69-6"><a href="8-sql-data-analysis.html#cb69-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-7"><a href="8-sql-data-analysis.html#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="co"># en factor van country maken</span></span>
<span id="cb69-8"><a href="8-sql-data-analysis.html#cb69-8" aria-hidden="true" tabindex="-1"></a>flu_data_tidy<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(flu_data_tidy<span class="sc">$</span>country)</span>
<span id="cb69-9"><a href="8-sql-data-analysis.html#cb69-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-10"><a href="8-sql-data-analysis.html#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="co"># dengue_data tidy maken</span></span>
<span id="cb69-11"><a href="8-sql-data-analysis.html#cb69-11" aria-hidden="true" tabindex="-1"></a>dengue_data_tidy <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(<span class="at">data =</span> dengue_data, <span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(<span class="st">&quot;Date&quot;</span>), <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;activity&quot;</span>)</span>
<span id="cb69-12"><a href="8-sql-data-analysis.html#cb69-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-13"><a href="8-sql-data-analysis.html#cb69-13" aria-hidden="true" tabindex="-1"></a><span class="co"># en factor van country maken</span></span>
<span id="cb69-14"><a href="8-sql-data-analysis.html#cb69-14" aria-hidden="true" tabindex="-1"></a>dengue_data_tidy<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(dengue_data_tidy<span class="sc">$</span>country)</span></code></pre></div>
<p>After this I exported the tidy data to csv an rds files</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="8-sql-data-analysis.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Oplsaan als CSV bestand</span></span>
<span id="cb70-2"><a href="8-sql-data-analysis.html#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(flu_data_tidy, <span class="at">path =</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>,<span class="st">&quot;flu_data_tidy.csv&quot;</span>))</span>
<span id="cb70-3"><a href="8-sql-data-analysis.html#cb70-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-4"><a href="8-sql-data-analysis.html#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Oplsaan als CSV bestand</span></span>
<span id="cb70-5"><a href="8-sql-data-analysis.html#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(dengue_data_tidy, <span class="at">path =</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>,<span class="st">&quot;dengue_data_tidy.csv&quot;</span>))</span>
<span id="cb70-6"><a href="8-sql-data-analysis.html#cb70-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-7"><a href="8-sql-data-analysis.html#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Oplsaan als CSV bestand</span></span>
<span id="cb70-8"><a href="8-sql-data-analysis.html#cb70-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(gapminder_tidy, <span class="at">path =</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>,<span class="st">&quot;gapminder_tidy.csv&quot;</span>))</span>
<span id="cb70-9"><a href="8-sql-data-analysis.html#cb70-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-10"><a href="8-sql-data-analysis.html#cb70-10" aria-hidden="true" tabindex="-1"></a><span class="co"># opslaan als rds bestand</span></span>
<span id="cb70-11"><a href="8-sql-data-analysis.html#cb70-11" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(flu_data_tidy, <span class="at">path =</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>,<span class="st">&quot;flu_data_tidy.rds&quot;</span>))</span>
<span id="cb70-12"><a href="8-sql-data-analysis.html#cb70-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-13"><a href="8-sql-data-analysis.html#cb70-13" aria-hidden="true" tabindex="-1"></a><span class="co"># opslaan als rds bestand</span></span>
<span id="cb70-14"><a href="8-sql-data-analysis.html#cb70-14" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(dengue_data_tidy, <span class="at">path =</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>,<span class="st">&quot;dengue_data_tidy.rds&quot;</span>))</span>
<span id="cb70-15"><a href="8-sql-data-analysis.html#cb70-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-16"><a href="8-sql-data-analysis.html#cb70-16" aria-hidden="true" tabindex="-1"></a><span class="co"># opslaan als rds bestand</span></span>
<span id="cb70-17"><a href="8-sql-data-analysis.html#cb70-17" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(gapminder_tidy, <span class="at">path =</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>,<span class="st">&quot;gapminder_tidy.rds&quot;</span>))</span></code></pre></div>
<p>These are the commands I used in the sql database with the program DBeaver</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb71-1"><a href="8-sql-data-analysis.html#cb71-1" aria-hidden="true" tabindex="-1"></a># en <span class="kw">table</span> maken</span>
<span id="cb71-2"><a href="8-sql-data-analysis.html#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> flu_data (</span>
<span id="cb71-3"><a href="8-sql-data-analysis.html#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">Date</span> <span class="dt">VARCHAR</span>(<span class="dv">50</span>),</span>
<span id="cb71-4"><a href="8-sql-data-analysis.html#cb71-4" aria-hidden="true" tabindex="-1"></a>  country <span class="dt">VARCHAR</span>(<span class="dv">50</span>),</span>
<span id="cb71-5"><a href="8-sql-data-analysis.html#cb71-5" aria-hidden="true" tabindex="-1"></a>  cases <span class="dt">VARCHAR</span>(<span class="dv">50</span>),</span>
<span id="cb71-6"><a href="8-sql-data-analysis.html#cb71-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">CONSTRAINT</span> PK_flu <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (<span class="dt">Date</span>,country)</span>
<span id="cb71-7"><a href="8-sql-data-analysis.html#cb71-7" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb71-8"><a href="8-sql-data-analysis.html#cb71-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-9"><a href="8-sql-data-analysis.html#cb71-9" aria-hidden="true" tabindex="-1"></a># de <span class="dt">date</span> naar de <span class="kw">table</span> verplaatsen</span>
<span id="cb71-10"><a href="8-sql-data-analysis.html#cb71-10" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> flu_data <span class="kw">FROM</span> <span class="st">&#39;C:/Users/Bas/Desktop/School/Programmeren/datascience/portfolio/data/flu_data_tidy.csv&#39;</span> <span class="kw">WITH</span> (FORMAT csv);</span>
<span id="cb71-11"><a href="8-sql-data-analysis.html#cb71-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-12"><a href="8-sql-data-analysis.html#cb71-12" aria-hidden="true" tabindex="-1"></a># de <span class="kw">table</span> laten zien</span>
<span id="cb71-13"><a href="8-sql-data-analysis.html#cb71-13" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> flu_data; </span>
<span id="cb71-14"><a href="8-sql-data-analysis.html#cb71-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-15"><a href="8-sql-data-analysis.html#cb71-15" aria-hidden="true" tabindex="-1"></a># en <span class="kw">table</span> maken</span>
<span id="cb71-16"><a href="8-sql-data-analysis.html#cb71-16" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> dengue_data (</span>
<span id="cb71-17"><a href="8-sql-data-analysis.html#cb71-17" aria-hidden="true" tabindex="-1"></a>  <span class="dt">Date</span> <span class="dt">VARCHAR</span>(<span class="dv">50</span>),</span>
<span id="cb71-18"><a href="8-sql-data-analysis.html#cb71-18" aria-hidden="true" tabindex="-1"></a>  country <span class="dt">VARCHAR</span>(<span class="dv">50</span>),</span>
<span id="cb71-19"><a href="8-sql-data-analysis.html#cb71-19" aria-hidden="true" tabindex="-1"></a>  activity <span class="dt">VARCHAR</span>(<span class="dv">50</span>),</span>
<span id="cb71-20"><a href="8-sql-data-analysis.html#cb71-20" aria-hidden="true" tabindex="-1"></a>  <span class="kw">CONSTRAINT</span> PK_dengue <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (<span class="dt">Date</span>,country)</span>
<span id="cb71-21"><a href="8-sql-data-analysis.html#cb71-21" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb71-22"><a href="8-sql-data-analysis.html#cb71-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-23"><a href="8-sql-data-analysis.html#cb71-23" aria-hidden="true" tabindex="-1"></a># de <span class="dt">date</span> naar de <span class="kw">table</span> verplaatsen</span>
<span id="cb71-24"><a href="8-sql-data-analysis.html#cb71-24" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> dengue_data <span class="kw">FROM</span> <span class="st">&#39;C:/Users/Bas/Desktop/School/Programmeren/datascience/portfolio/data/dengue_data_tidy.csv&#39;</span> <span class="kw">WITH</span> (FORMAT csv);</span>
<span id="cb71-25"><a href="8-sql-data-analysis.html#cb71-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-26"><a href="8-sql-data-analysis.html#cb71-26" aria-hidden="true" tabindex="-1"></a># de <span class="kw">table</span> laten zien</span>
<span id="cb71-27"><a href="8-sql-data-analysis.html#cb71-27" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> dengue_data; </span></code></pre></div>
<p>Here I connect to the SQL database and inspect the database with the help of R.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="8-sql-data-analysis.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># connect to the database</span></span>
<span id="cb72-2"><a href="8-sql-data-analysis.html#cb72-2" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RPostgres<span class="sc">::</span><span class="fu">Postgres</span>(), </span>
<span id="cb72-3"><a href="8-sql-data-analysis.html#cb72-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">dbname =</span> <span class="st">&quot;workflowsdb&quot;</span>, </span>
<span id="cb72-4"><a href="8-sql-data-analysis.html#cb72-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">host=</span><span class="st">&quot;localhost&quot;</span>, </span>
<span id="cb72-5"><a href="8-sql-data-analysis.html#cb72-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">port=</span><span class="st">&quot;5432&quot;</span>, </span>
<span id="cb72-6"><a href="8-sql-data-analysis.html#cb72-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">user=</span><span class="st">&quot;postgres&quot;</span>, </span>
<span id="cb72-7"><a href="8-sql-data-analysis.html#cb72-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">password=</span><span class="st">&quot;kaas&quot;</span>) </span>
<span id="cb72-8"><a href="8-sql-data-analysis.html#cb72-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-9"><a href="8-sql-data-analysis.html#cb72-9" aria-hidden="true" tabindex="-1"></a><span class="co"># laat de tables zien</span></span>
<span id="cb72-10"><a href="8-sql-data-analysis.html#cb72-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListTables</span>(con)</span></code></pre></div>
<pre><code>## [1] &quot;flu_data&quot;    &quot;dengue_data&quot; &quot;gapminder&quot;</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="8-sql-data-analysis.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># laat de colummen in flu_data zien</span></span>
<span id="cb74-2"><a href="8-sql-data-analysis.html#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListFields</span>(con, <span class="st">&quot;flu_data&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;date&quot;    &quot;country&quot; &quot;cases&quot;</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="8-sql-data-analysis.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># laat het tabel flu_data zien</span></span>
<span id="cb76-2"><a href="8-sql-data-analysis.html#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">dbGetQuery</span>(con, <span class="st">&#39;SELECT * FROM flu_data&#39;</span>))</span></code></pre></div>
<pre><code>##         date   country cases
## 1       Date   country cases
## 2 2002-12-29 Argentina    NA
## 3 2002-12-29 Australia    NA
## 4 2002-12-29   Austria    NA
## 5 2002-12-29   Belgium    NA
## 6 2002-12-29   Bolivia    NA</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="8-sql-data-analysis.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># disconnect van de database</span></span>
<span id="cb78-2"><a href="8-sql-data-analysis.html#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dbDisconnect</span>(con) </span></code></pre></div>
<p>These are the commands I used in the sql database with the program DBeaver to create the gapminder table.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb79-1"><a href="8-sql-data-analysis.html#cb79-1" aria-hidden="true" tabindex="-1"></a>#create gapminder <span class="kw">table</span></span>
<span id="cb79-2"><a href="8-sql-data-analysis.html#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> gapminder (</span>
<span id="cb79-3"><a href="8-sql-data-analysis.html#cb79-3" aria-hidden="true" tabindex="-1"></a>  country <span class="dt">VARCHAR</span>(<span class="dv">50</span>),</span>
<span id="cb79-4"><a href="8-sql-data-analysis.html#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">Date</span> <span class="dt">VARCHAR</span>(<span class="dv">50</span>),</span>
<span id="cb79-5"><a href="8-sql-data-analysis.html#cb79-5" aria-hidden="true" tabindex="-1"></a>  infant_mortality <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">not</span> <span class="kw">null</span>,</span>
<span id="cb79-6"><a href="8-sql-data-analysis.html#cb79-6" aria-hidden="true" tabindex="-1"></a>  life_expectancy <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">not</span> <span class="kw">null</span>,</span>
<span id="cb79-7"><a href="8-sql-data-analysis.html#cb79-7" aria-hidden="true" tabindex="-1"></a>  fertitlity <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">not</span> <span class="kw">null</span>,</span>
<span id="cb79-8"><a href="8-sql-data-analysis.html#cb79-8" aria-hidden="true" tabindex="-1"></a>  population <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">not</span> <span class="kw">null</span>,</span>
<span id="cb79-9"><a href="8-sql-data-analysis.html#cb79-9" aria-hidden="true" tabindex="-1"></a>  gdp <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">not</span> <span class="kw">null</span>,</span>
<span id="cb79-10"><a href="8-sql-data-analysis.html#cb79-10" aria-hidden="true" tabindex="-1"></a>  continent <span class="dt">VARCHAR</span>(<span class="dv">50</span>),</span>
<span id="cb79-11"><a href="8-sql-data-analysis.html#cb79-11" aria-hidden="true" tabindex="-1"></a>  region <span class="dt">VARCHAR</span>(<span class="dv">50</span>),</span>
<span id="cb79-12"><a href="8-sql-data-analysis.html#cb79-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">CONSTRAINT</span> PK_gapminder <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (<span class="dt">Date</span>,country)</span>
<span id="cb79-13"><a href="8-sql-data-analysis.html#cb79-13" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb79-14"><a href="8-sql-data-analysis.html#cb79-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-15"><a href="8-sql-data-analysis.html#cb79-15" aria-hidden="true" tabindex="-1"></a>#import <span class="kw">the</span> gampinder <span class="kw">file</span></span>
<span id="cb79-16"><a href="8-sql-data-analysis.html#cb79-16" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> gapminder <span class="kw">FROM</span> <span class="st">&#39;C:/Users/Bas/Desktop/School/Programmeren/datascience/portfolio/data/gapminder_tidy.csv&#39;</span> <span class="kw">WITH</span> (FORMAT csv);</span>
<span id="cb79-17"><a href="8-sql-data-analysis.html#cb79-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-18"><a href="8-sql-data-analysis.html#cb79-18" aria-hidden="true" tabindex="-1"></a># laat de tabel zien</span>
<span id="cb79-19"><a href="8-sql-data-analysis.html#cb79-19" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> gapminder; </span></code></pre></div>
<p>Here I select two table together forming 1 table wich I save as “gapminder_flu”</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="8-sql-data-analysis.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># connect to the database</span></span>
<span id="cb80-2"><a href="8-sql-data-analysis.html#cb80-2" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RPostgres<span class="sc">::</span><span class="fu">Postgres</span>(), </span>
<span id="cb80-3"><a href="8-sql-data-analysis.html#cb80-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">dbname =</span> <span class="st">&quot;workflowsdb&quot;</span>, </span>
<span id="cb80-4"><a href="8-sql-data-analysis.html#cb80-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">host=</span><span class="st">&quot;localhost&quot;</span>, </span>
<span id="cb80-5"><a href="8-sql-data-analysis.html#cb80-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">port=</span><span class="st">&quot;5432&quot;</span>, </span>
<span id="cb80-6"><a href="8-sql-data-analysis.html#cb80-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">user=</span><span class="st">&quot;postgres&quot;</span>, </span>
<span id="cb80-7"><a href="8-sql-data-analysis.html#cb80-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">password=</span><span class="st">&quot;kaas&quot;</span>) </span>
<span id="cb80-8"><a href="8-sql-data-analysis.html#cb80-8" aria-hidden="true" tabindex="-1"></a>gapminder_flu <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="st">&#39;select distinct *</span></span>
<span id="cb80-9"><a href="8-sql-data-analysis.html#cb80-9" aria-hidden="true" tabindex="-1"></a><span class="st">from flu_data,gapminder</span></span>
<span id="cb80-10"><a href="8-sql-data-analysis.html#cb80-10" aria-hidden="true" tabindex="-1"></a><span class="st">where flu_data.country = gapminder.country;&#39;</span></span>
<span id="cb80-11"><a href="8-sql-data-analysis.html#cb80-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb80-12"><a href="8-sql-data-analysis.html#cb80-12" aria-hidden="true" tabindex="-1"></a><span class="co"># disconnect van de database</span></span>
<span id="cb80-13"><a href="8-sql-data-analysis.html#cb80-13" aria-hidden="true" tabindex="-1"></a><span class="fu">dbDisconnect</span>(con) </span></code></pre></div>
<p>Now I have the data wrangled an can make all kinds of graphs with the data</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="8-sql-data-analysis.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter for the Netherlands and calculate the average cases over time</span></span>
<span id="cb81-2"><a href="8-sql-data-analysis.html#cb81-2" aria-hidden="true" tabindex="-1"></a>cases_netherlands <span class="ot">&lt;-</span> gapminder_flu <span class="sc">%&gt;%</span> <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Netherlands&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="at">date=</span><span class="fu">as.Date</span>(date)) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">mean_cases=</span><span class="fu">mean</span>(<span class="fu">as.numeric</span>(cases)))</span>
<span id="cb81-3"><a href="8-sql-data-analysis.html#cb81-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-4"><a href="8-sql-data-analysis.html#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="co"># make a gg line plot</span></span>
<span id="cb81-5"><a href="8-sql-data-analysis.html#cb81-5" aria-hidden="true" tabindex="-1"></a>netherlands_graph <span class="ot">&lt;-</span> cases_netherlands <span class="sc">%&gt;%</span></span>
<span id="cb81-6"><a href="8-sql-data-analysis.html#cb81-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> mean_cases)) <span class="sc">+</span></span>
<span id="cb81-7"><a href="8-sql-data-analysis.html#cb81-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb81-8"><a href="8-sql-data-analysis.html#cb81-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb81-9"><a href="8-sql-data-analysis.html#cb81-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;flu cases over time in the netherlands&quot;</span>,</span>
<span id="cb81-10"><a href="8-sql-data-analysis.html#cb81-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;cases&quot;</span></span>
<span id="cb81-11"><a href="8-sql-data-analysis.html#cb81-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb81-12"><a href="8-sql-data-analysis.html#cb81-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(netherlands_graph)</span></code></pre></div>
<div id="htmlwidget-084070e9a125b1e28cc3" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-084070e9a125b1e28cc3">{"x":{"data":[{"x":[12050,12057,12064,12071,12078,12085,12092,12099,12106,12113,12120,12127,12134,12141,12148,12155,12162,12169,12176,12183,12190,12197,12204,12211,12218,12225,12232,12239,12246,12253,12260,12267,12274,12281,12288,12295,12302,12309,12316,12323,12330,12337,12344,12351,12358,12365,12372,12379,12386,12393,12400,12407,12414,12421,12428,12435,12442,12449,12456,12463,12470,12477,12484,12491,12498,12505,12512,12519,12526,12533,12540,12547,12554,12561,12568,12575,12582,12589,12596,12603,12610,12617,12624,12631,12638,12645,12652,12659,12666,12673,12680,12687,12694,12701,12708,12715,12722,12729,12736,12743,12750,12757,12764,12771,12778,12785,12792,12799,12806,12813,12820,12827,12834,12841,12848,12855,12862,12869,12876,12883,12890,12897,12904,12911,12918,12925,12932,12939,12946,12953,12960,12967,12974,12981,12988,12995,13002,13009,13016,13023,13030,13037,13044,13051,13058,13065,13072,13079,13086,13093,13100,13107,13114,13121,13128,13135,13142,13149,13156,13163,13170,13177,13184,13191,13198,13205,13212,13219,13226,13233,13240,13247,13254,13261,13268,13275,13282,13289,13296,13303,13310,13317,13324,13331,13338,13345,13352,13359,13366,13373,13380,13387,13394,13401,13408,13415,13422,13429,13436,13443,13450,13457,13464,13471,13478,13485,13492,13499,13506,13513,13520,13527,13534,13541,13548,13555,13562,13569,13576,13583,13590,13597,13604,13611,13618,13625,13632,13639,13646,13653,13660,13667,13674,13681,13688,13695,13702,13709,13716,13723,13730,13737,13744,13751,13758,13765,13772,13779,13786,13793,13800,13807,13814,13821,13828,13835,13842,13849,13856,13863,13870,13877,13884,13891,13898,13905,13912,13919,13926,13933,13940,13947,13954,13961,13968,13975,13982,13989,13996,14003,14010,14017,14024,14031,14038,14045,14052,14059,14066,14073,14080,14087,14094,14101,14108,14115,14122,14129,14136,14143,14150,14157,14164,14171,14178,14185,14192,14199,14206,14213,14220,14227,14234,14241,14248,14255,14262,14269,14276,14283,14290,14297,14304,14311,14318,14325,14332,14339,14346,14353,14360,14367,14374,14381,14388,14395,14402,14409,14416,14423,14430,14437,14444,14451,14458,14465,14472,14479,14486,14493,14500,14507,14514,14521,14528,14535,14542,14549,14556,14563,14570,14577,14584,14591,14598,14605,14612,14619,14626,14633,14640,14647,14654,14661,14668,14675,14682,14689,14696,14703,14710,14717,14724,14731,14738,14745,14752,14759,14766,14773,14780,14787,14794,14801,14808,14815,14822,14829,14836,14843,14850,14857,14864,14871,14878,14885,14892,14899,14906,14913,14920,14927,14934,14941,14948,14955,14962,14969,14976,14983,14990,14997,15004,15011,15018,15025,15032,15039,15046,15053,15060,15067,15074,15081,15088,15095,15102,15109,15116,15123,15130,15137,15144,15151,15158,15165,15172,15179,15186,15193,15200,15207,15214,15221,15228,15235,15242,15249,15256,15263,15270,15277,15284,15291,15298,15305,15312,15319,15326,15333,15340,15347,15354,15361,15368,15375,15382,15389,15396,15403,15410,15417,15424,15431,15438,15445,15452,15459,15466,15473,15480,15487,15494,15501,15508,15515,15522,15529,15536,15543,15550,15557,15564,15571,15578,15585,15592,15599,15606,15613,15620,15627,15634,15641,15648,15655,15662,15669,15676,15683,15690,15697,15704,15711,15718,15725,15732,15739,15746,15753,15760,15767,15774,15781,15788,15795,15802,15809,15816,15823,15830,15837,15844,15851,15858,15865,15872,15879,15886,15893,15900,15907,15914,15921,15928,15935,15942,15949,15956,15963,15970,15977,15984,15991,15998,16005,16012,16019,16026,16033,16040,16047,16054,16061,16068,16075,16082,16089,16096,16103,16110,16117,16124,16131,16138,16145,16152,16159,16166,16173,16180,16187,16194,16201,16208,16215,16222,16229,16236,16243,16250,16257,16264,16271,16278,16285,16292,16299,16306,16313,16320,16327,16334,16341,16348,16355,16362,16369,16376,16383,16390,16397,16404,16411,16418,16425,16432,16439,16446,16453,16460,16467,16474,16481,16488,16495,16502,16509,16516,16523,16530,16537,16544,16551,16558,16565,16572,16579,16586,16593,16600,16607,16614,16621,16628,16635,16642,16649,16656],"y":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,25,22,19,19,18,22,23,24,55,121,159,177,102,58,28,20,20,20,19,19,18,18,17,16,15,12,12,14,15,16,14,16,16,13,12,12,11,11,11,12,11,13,11,11,10,13,14,13,17,19,24,30,29,25,26,20,19,20,24,32,31,34,36,33,34,34,37,37,43,60,95,119,140,108,94,87,61,36,29,24,23,23,18,21,16,18,14,15,15,15,12,14,13,14,14,13,12,14,14,13,17,18,27,24,26,30,27,28,30,30,28,29,31,36,33,26,24,23,34,31,34,39,52,70,66,72,61,61,62,53,31,25,24,20,17,15,15,13,16,14,15,16,17,13,17,14,14,15,16,15,16,19,21,28,28,23,22,24,25,23,24,25,26,25,27,28,30,27,27,29,32,28,32,37,46,55,85,97,79,60,46,40,31,31,21,19,17,17,16,18,17,17,17,16,17,17,15,16,16,12,12,15,14,15,21,27,27,28,30,30,24,28,28,31,29,35,34,38,42,37,44,51,61,60,62,69,80,82,89,69,52,42,35,39,36,34,31,28,22,18,14,15,15,16,15,17,17,16,13,14,16,11,15,15,15,20,21,27,28,25,25,30,26,28,28,30,33,32,32,37,45,54,66,81,106,153,184,139,103,69,56,49,45,35,32,26,23,22,19,17,33,29,22,18,15,14,19,28,24,21,21,31,40,47,58,50,49,49,54,62,68,59,54,52,55,71,123,168,199,151,99,56,52,42,26,25,31,29,28,30,28,29,29,25,19,22,23,20,16,17,16,14,14,13,14,14,11,12,12,11,12,10,11,11,11,12,11,12,14,15,19,25,27,32,27,28,25,23,23,22,23,25,28,30,35,42,48,67,105,107,97,82,91,68,53,40,34,31,33,25,21,20,17,15,12,11,13,13,13,12,12,11,13,11,12,11,11,10,10,10,12,13,14,15,16,23,24,21,23,30,33,36,44,43,49,46,43,44,37,37,35,40,42,40,44,54,66,96,87,62,47,38,29,26,26,25,22,21,20,17,16,15,16,17,19,21,20,19,23,18,18,14,14,14,18,23,28,35,44,44,43,41,34,34,36,37,41,44,45,58,81,122,134,126,127,233,270,174,172,141,107,80,60,56,48,47,43,31,24,21,19,17,16,19,20,23,19,20,20,18,18,15,16,15,17,19,22,25,28,36,39,39,32,31,32,30,35,35,42,43,41,45,41,34,40,34,35,41,43,52,48,44,46,42,38,34,34,34,30,30,35,23,21,21,19,15,17,15,17,16,17,16,14,13,15,16,16,19,25,28,31,34,32,27,29,31,27,29,30,32,34,34,40,57,78,82,90,102,98,119,146,158,193,138,103,72,59,48,44,38,37,31,25,25,22,16,17,16,17,17,16,16,13,14,16,13,13,12,12],"text":["date: 2002-12-29<br />mean_cases:  NA","date: 2003-01-05<br />mean_cases:  NA","date: 2003-01-12<br />mean_cases:  NA","date: 2003-01-19<br />mean_cases:  NA","date: 2003-01-26<br />mean_cases:  NA","date: 2003-02-02<br />mean_cases:  NA","date: 2003-02-09<br />mean_cases:  NA","date: 2003-02-16<br />mean_cases:  NA","date: 2003-02-23<br />mean_cases:  NA","date: 2003-03-02<br />mean_cases:  NA","date: 2003-03-09<br />mean_cases:  NA","date: 2003-03-16<br />mean_cases:  NA","date: 2003-03-23<br />mean_cases:  NA","date: 2003-03-30<br />mean_cases:  NA","date: 2003-04-06<br />mean_cases:  NA","date: 2003-04-13<br />mean_cases:  NA","date: 2003-04-20<br />mean_cases:  NA","date: 2003-04-27<br />mean_cases:  NA","date: 2003-05-04<br />mean_cases:  NA","date: 2003-05-11<br />mean_cases:  NA","date: 2003-05-18<br />mean_cases:  NA","date: 2003-05-25<br />mean_cases:  NA","date: 2003-06-01<br />mean_cases:  NA","date: 2003-06-08<br />mean_cases:  NA","date: 2003-06-15<br />mean_cases:  NA","date: 2003-06-22<br />mean_cases:  NA","date: 2003-06-29<br />mean_cases:  NA","date: 2003-07-06<br />mean_cases:  NA","date: 2003-07-13<br />mean_cases:  NA","date: 2003-07-20<br />mean_cases:  NA","date: 2003-07-27<br />mean_cases:  NA","date: 2003-08-03<br />mean_cases:  NA","date: 2003-08-10<br />mean_cases:  NA","date: 2003-08-17<br />mean_cases:  NA","date: 2003-08-24<br />mean_cases:  NA","date: 2003-08-31<br />mean_cases:  NA","date: 2003-09-07<br />mean_cases:  NA","date: 2003-09-14<br />mean_cases:  NA","date: 2003-09-21<br />mean_cases:  NA","date: 2003-09-28<br />mean_cases:  NA","date: 2003-10-05<br />mean_cases:  25","date: 2003-10-12<br />mean_cases:  22","date: 2003-10-19<br />mean_cases:  19","date: 2003-10-26<br />mean_cases:  19","date: 2003-11-02<br />mean_cases:  18","date: 2003-11-09<br />mean_cases:  22","date: 2003-11-16<br />mean_cases:  23","date: 2003-11-23<br />mean_cases:  24","date: 2003-11-30<br />mean_cases:  55","date: 2003-12-07<br />mean_cases: 121","date: 2003-12-14<br />mean_cases: 159","date: 2003-12-21<br />mean_cases: 177","date: 2003-12-28<br />mean_cases: 102","date: 2004-01-04<br />mean_cases:  58","date: 2004-01-11<br />mean_cases:  28","date: 2004-01-18<br />mean_cases:  20","date: 2004-01-25<br />mean_cases:  20","date: 2004-02-01<br />mean_cases:  20","date: 2004-02-08<br />mean_cases:  19","date: 2004-02-15<br />mean_cases:  19","date: 2004-02-22<br />mean_cases:  18","date: 2004-02-29<br />mean_cases:  18","date: 2004-03-07<br />mean_cases:  17","date: 2004-03-14<br />mean_cases:  16","date: 2004-03-21<br />mean_cases:  15","date: 2004-03-28<br />mean_cases:  12","date: 2004-04-04<br />mean_cases:  12","date: 2004-04-11<br />mean_cases:  14","date: 2004-04-18<br />mean_cases:  15","date: 2004-04-25<br />mean_cases:  16","date: 2004-05-02<br />mean_cases:  14","date: 2004-05-09<br />mean_cases:  16","date: 2004-05-16<br />mean_cases:  16","date: 2004-05-23<br />mean_cases:  13","date: 2004-05-30<br />mean_cases:  12","date: 2004-06-06<br />mean_cases:  12","date: 2004-06-13<br />mean_cases:  11","date: 2004-06-20<br />mean_cases:  11","date: 2004-06-27<br />mean_cases:  11","date: 2004-07-04<br />mean_cases:  12","date: 2004-07-11<br />mean_cases:  11","date: 2004-07-18<br />mean_cases:  13","date: 2004-07-25<br />mean_cases:  11","date: 2004-08-01<br />mean_cases:  11","date: 2004-08-08<br />mean_cases:  10","date: 2004-08-15<br />mean_cases:  13","date: 2004-08-22<br />mean_cases:  14","date: 2004-08-29<br />mean_cases:  13","date: 2004-09-05<br />mean_cases:  17","date: 2004-09-12<br />mean_cases:  19","date: 2004-09-19<br />mean_cases:  24","date: 2004-09-26<br />mean_cases:  30","date: 2004-10-03<br />mean_cases:  29","date: 2004-10-10<br />mean_cases:  25","date: 2004-10-17<br />mean_cases:  26","date: 2004-10-24<br />mean_cases:  20","date: 2004-10-31<br />mean_cases:  19","date: 2004-11-07<br />mean_cases:  20","date: 2004-11-14<br />mean_cases:  24","date: 2004-11-21<br />mean_cases:  32","date: 2004-11-28<br />mean_cases:  31","date: 2004-12-05<br />mean_cases:  34","date: 2004-12-12<br />mean_cases:  36","date: 2004-12-19<br />mean_cases:  33","date: 2004-12-26<br />mean_cases:  34","date: 2005-01-02<br />mean_cases:  34","date: 2005-01-09<br />mean_cases:  37","date: 2005-01-16<br />mean_cases:  37","date: 2005-01-23<br />mean_cases:  43","date: 2005-01-30<br />mean_cases:  60","date: 2005-02-06<br />mean_cases:  95","date: 2005-02-13<br />mean_cases: 119","date: 2005-02-20<br />mean_cases: 140","date: 2005-02-27<br />mean_cases: 108","date: 2005-03-06<br />mean_cases:  94","date: 2005-03-13<br />mean_cases:  87","date: 2005-03-20<br />mean_cases:  61","date: 2005-03-27<br />mean_cases:  36","date: 2005-04-03<br />mean_cases:  29","date: 2005-04-10<br />mean_cases:  24","date: 2005-04-17<br />mean_cases:  23","date: 2005-04-24<br />mean_cases:  23","date: 2005-05-01<br />mean_cases:  18","date: 2005-05-08<br />mean_cases:  21","date: 2005-05-15<br />mean_cases:  16","date: 2005-05-22<br />mean_cases:  18","date: 2005-05-29<br />mean_cases:  14","date: 2005-06-05<br />mean_cases:  15","date: 2005-06-12<br />mean_cases:  15","date: 2005-06-19<br />mean_cases:  15","date: 2005-06-26<br />mean_cases:  12","date: 2005-07-03<br />mean_cases:  14","date: 2005-07-10<br />mean_cases:  13","date: 2005-07-17<br />mean_cases:  14","date: 2005-07-24<br />mean_cases:  14","date: 2005-07-31<br />mean_cases:  13","date: 2005-08-07<br />mean_cases:  12","date: 2005-08-14<br />mean_cases:  14","date: 2005-08-21<br />mean_cases:  14","date: 2005-08-28<br />mean_cases:  13","date: 2005-09-04<br />mean_cases:  17","date: 2005-09-11<br />mean_cases:  18","date: 2005-09-18<br />mean_cases:  27","date: 2005-09-25<br />mean_cases:  24","date: 2005-10-02<br />mean_cases:  26","date: 2005-10-09<br />mean_cases:  30","date: 2005-10-16<br />mean_cases:  27","date: 2005-10-23<br />mean_cases:  28","date: 2005-10-30<br />mean_cases:  30","date: 2005-11-06<br />mean_cases:  30","date: 2005-11-13<br />mean_cases:  28","date: 2005-11-20<br />mean_cases:  29","date: 2005-11-27<br />mean_cases:  31","date: 2005-12-04<br />mean_cases:  36","date: 2005-12-11<br />mean_cases:  33","date: 2005-12-18<br />mean_cases:  26","date: 2005-12-25<br />mean_cases:  24","date: 2006-01-01<br />mean_cases:  23","date: 2006-01-08<br />mean_cases:  34","date: 2006-01-15<br />mean_cases:  31","date: 2006-01-22<br />mean_cases:  34","date: 2006-01-29<br />mean_cases:  39","date: 2006-02-05<br />mean_cases:  52","date: 2006-02-12<br />mean_cases:  70","date: 2006-02-19<br />mean_cases:  66","date: 2006-02-26<br />mean_cases:  72","date: 2006-03-05<br />mean_cases:  61","date: 2006-03-12<br />mean_cases:  61","date: 2006-03-19<br />mean_cases:  62","date: 2006-03-26<br />mean_cases:  53","date: 2006-04-02<br />mean_cases:  31","date: 2006-04-09<br />mean_cases:  25","date: 2006-04-16<br />mean_cases:  24","date: 2006-04-23<br />mean_cases:  20","date: 2006-04-30<br />mean_cases:  17","date: 2006-05-07<br />mean_cases:  15","date: 2006-05-14<br />mean_cases:  15","date: 2006-05-21<br />mean_cases:  13","date: 2006-05-28<br />mean_cases:  16","date: 2006-06-04<br />mean_cases:  14","date: 2006-06-11<br />mean_cases:  15","date: 2006-06-18<br />mean_cases:  16","date: 2006-06-25<br />mean_cases:  17","date: 2006-07-02<br />mean_cases:  13","date: 2006-07-09<br />mean_cases:  17","date: 2006-07-16<br />mean_cases:  14","date: 2006-07-23<br />mean_cases:  14","date: 2006-07-30<br />mean_cases:  15","date: 2006-08-06<br />mean_cases:  16","date: 2006-08-13<br />mean_cases:  15","date: 2006-08-20<br />mean_cases:  16","date: 2006-08-27<br />mean_cases:  19","date: 2006-09-03<br />mean_cases:  21","date: 2006-09-10<br />mean_cases:  28","date: 2006-09-17<br />mean_cases:  28","date: 2006-09-24<br />mean_cases:  23","date: 2006-10-01<br />mean_cases:  22","date: 2006-10-08<br />mean_cases:  24","date: 2006-10-15<br />mean_cases:  25","date: 2006-10-22<br />mean_cases:  23","date: 2006-10-29<br />mean_cases:  24","date: 2006-11-05<br />mean_cases:  25","date: 2006-11-12<br />mean_cases:  26","date: 2006-11-19<br />mean_cases:  25","date: 2006-11-26<br />mean_cases:  27","date: 2006-12-03<br />mean_cases:  28","date: 2006-12-10<br />mean_cases:  30","date: 2006-12-17<br />mean_cases:  27","date: 2006-12-24<br />mean_cases:  27","date: 2006-12-31<br />mean_cases:  29","date: 2007-01-07<br />mean_cases:  32","date: 2007-01-14<br />mean_cases:  28","date: 2007-01-21<br />mean_cases:  32","date: 2007-01-28<br />mean_cases:  37","date: 2007-02-04<br />mean_cases:  46","date: 2007-02-11<br />mean_cases:  55","date: 2007-02-18<br />mean_cases:  85","date: 2007-02-25<br />mean_cases:  97","date: 2007-03-04<br />mean_cases:  79","date: 2007-03-11<br />mean_cases:  60","date: 2007-03-18<br />mean_cases:  46","date: 2007-03-25<br />mean_cases:  40","date: 2007-04-01<br />mean_cases:  31","date: 2007-04-08<br />mean_cases:  31","date: 2007-04-15<br />mean_cases:  21","date: 2007-04-22<br />mean_cases:  19","date: 2007-04-29<br />mean_cases:  17","date: 2007-05-06<br />mean_cases:  17","date: 2007-05-13<br />mean_cases:  16","date: 2007-05-20<br />mean_cases:  18","date: 2007-05-27<br />mean_cases:  17","date: 2007-06-03<br />mean_cases:  17","date: 2007-06-10<br />mean_cases:  17","date: 2007-06-17<br />mean_cases:  16","date: 2007-06-24<br />mean_cases:  17","date: 2007-07-01<br />mean_cases:  17","date: 2007-07-08<br />mean_cases:  15","date: 2007-07-15<br />mean_cases:  16","date: 2007-07-22<br />mean_cases:  16","date: 2007-07-29<br />mean_cases:  12","date: 2007-08-05<br />mean_cases:  12","date: 2007-08-12<br />mean_cases:  15","date: 2007-08-19<br />mean_cases:  14","date: 2007-08-26<br />mean_cases:  15","date: 2007-09-02<br />mean_cases:  21","date: 2007-09-09<br />mean_cases:  27","date: 2007-09-16<br />mean_cases:  27","date: 2007-09-23<br />mean_cases:  28","date: 2007-09-30<br />mean_cases:  30","date: 2007-10-07<br />mean_cases:  30","date: 2007-10-14<br />mean_cases:  24","date: 2007-10-21<br />mean_cases:  28","date: 2007-10-28<br />mean_cases:  28","date: 2007-11-04<br />mean_cases:  31","date: 2007-11-11<br />mean_cases:  29","date: 2007-11-18<br />mean_cases:  35","date: 2007-11-25<br />mean_cases:  34","date: 2007-12-02<br />mean_cases:  38","date: 2007-12-09<br />mean_cases:  42","date: 2007-12-16<br />mean_cases:  37","date: 2007-12-23<br />mean_cases:  44","date: 2007-12-30<br />mean_cases:  51","date: 2008-01-06<br />mean_cases:  61","date: 2008-01-13<br />mean_cases:  60","date: 2008-01-20<br />mean_cases:  62","date: 2008-01-27<br />mean_cases:  69","date: 2008-02-03<br />mean_cases:  80","date: 2008-02-10<br />mean_cases:  82","date: 2008-02-17<br />mean_cases:  89","date: 2008-02-24<br />mean_cases:  69","date: 2008-03-02<br />mean_cases:  52","date: 2008-03-09<br />mean_cases:  42","date: 2008-03-16<br />mean_cases:  35","date: 2008-03-23<br />mean_cases:  39","date: 2008-03-30<br />mean_cases:  36","date: 2008-04-06<br />mean_cases:  34","date: 2008-04-13<br />mean_cases:  31","date: 2008-04-20<br />mean_cases:  28","date: 2008-04-27<br />mean_cases:  22","date: 2008-05-04<br />mean_cases:  18","date: 2008-05-11<br />mean_cases:  14","date: 2008-05-18<br />mean_cases:  15","date: 2008-05-25<br />mean_cases:  15","date: 2008-06-01<br />mean_cases:  16","date: 2008-06-08<br />mean_cases:  15","date: 2008-06-15<br />mean_cases:  17","date: 2008-06-22<br />mean_cases:  17","date: 2008-06-29<br />mean_cases:  16","date: 2008-07-06<br />mean_cases:  13","date: 2008-07-13<br />mean_cases:  14","date: 2008-07-20<br />mean_cases:  16","date: 2008-07-27<br />mean_cases:  11","date: 2008-08-03<br />mean_cases:  15","date: 2008-08-10<br />mean_cases:  15","date: 2008-08-17<br />mean_cases:  15","date: 2008-08-24<br />mean_cases:  20","date: 2008-08-31<br />mean_cases:  21","date: 2008-09-07<br />mean_cases:  27","date: 2008-09-14<br />mean_cases:  28","date: 2008-09-21<br />mean_cases:  25","date: 2008-09-28<br />mean_cases:  25","date: 2008-10-05<br />mean_cases:  30","date: 2008-10-12<br />mean_cases:  26","date: 2008-10-19<br />mean_cases:  28","date: 2008-10-26<br />mean_cases:  28","date: 2008-11-02<br />mean_cases:  30","date: 2008-11-09<br />mean_cases:  33","date: 2008-11-16<br />mean_cases:  32","date: 2008-11-23<br />mean_cases:  32","date: 2008-11-30<br />mean_cases:  37","date: 2008-12-07<br />mean_cases:  45","date: 2008-12-14<br />mean_cases:  54","date: 2008-12-21<br />mean_cases:  66","date: 2008-12-28<br />mean_cases:  81","date: 2009-01-04<br />mean_cases: 106","date: 2009-01-11<br />mean_cases: 153","date: 2009-01-18<br />mean_cases: 184","date: 2009-01-25<br />mean_cases: 139","date: 2009-02-01<br />mean_cases: 103","date: 2009-02-08<br />mean_cases:  69","date: 2009-02-15<br />mean_cases:  56","date: 2009-02-22<br />mean_cases:  49","date: 2009-03-01<br />mean_cases:  45","date: 2009-03-08<br />mean_cases:  35","date: 2009-03-15<br />mean_cases:  32","date: 2009-03-22<br />mean_cases:  26","date: 2009-03-29<br />mean_cases:  23","date: 2009-04-05<br />mean_cases:  22","date: 2009-04-12<br />mean_cases:  19","date: 2009-04-19<br />mean_cases:  17","date: 2009-04-26<br />mean_cases:  33","date: 2009-05-03<br />mean_cases:  29","date: 2009-05-10<br />mean_cases:  22","date: 2009-05-17<br />mean_cases:  18","date: 2009-05-24<br />mean_cases:  15","date: 2009-05-31<br />mean_cases:  14","date: 2009-06-07<br />mean_cases:  19","date: 2009-06-14<br />mean_cases:  28","date: 2009-06-21<br />mean_cases:  24","date: 2009-06-28<br />mean_cases:  21","date: 2009-07-05<br />mean_cases:  21","date: 2009-07-12<br />mean_cases:  31","date: 2009-07-19<br />mean_cases:  40","date: 2009-07-26<br />mean_cases:  47","date: 2009-08-02<br />mean_cases:  58","date: 2009-08-09<br />mean_cases:  50","date: 2009-08-16<br />mean_cases:  49","date: 2009-08-23<br />mean_cases:  49","date: 2009-08-30<br />mean_cases:  54","date: 2009-09-06<br />mean_cases:  62","date: 2009-09-13<br />mean_cases:  68","date: 2009-09-20<br />mean_cases:  59","date: 2009-09-27<br />mean_cases:  54","date: 2009-10-04<br />mean_cases:  52","date: 2009-10-11<br />mean_cases:  55","date: 2009-10-18<br />mean_cases:  71","date: 2009-10-25<br />mean_cases: 123","date: 2009-11-01<br />mean_cases: 168","date: 2009-11-08<br />mean_cases: 199","date: 2009-11-15<br />mean_cases: 151","date: 2009-11-22<br />mean_cases:  99","date: 2009-11-29<br />mean_cases:  56","date: 2009-12-06<br />mean_cases:  52","date: 2009-12-13<br />mean_cases:  42","date: 2009-12-20<br />mean_cases:  26","date: 2009-12-27<br />mean_cases:  25","date: 2010-01-03<br />mean_cases:  31","date: 2010-01-10<br />mean_cases:  29","date: 2010-01-17<br />mean_cases:  28","date: 2010-01-24<br />mean_cases:  30","date: 2010-01-31<br />mean_cases:  28","date: 2010-02-07<br />mean_cases:  29","date: 2010-02-14<br />mean_cases:  29","date: 2010-02-21<br />mean_cases:  25","date: 2010-02-28<br />mean_cases:  19","date: 2010-03-07<br />mean_cases:  22","date: 2010-03-14<br />mean_cases:  23","date: 2010-03-21<br />mean_cases:  20","date: 2010-03-28<br />mean_cases:  16","date: 2010-04-04<br />mean_cases:  17","date: 2010-04-11<br />mean_cases:  16","date: 2010-04-18<br />mean_cases:  14","date: 2010-04-25<br />mean_cases:  14","date: 2010-05-02<br />mean_cases:  13","date: 2010-05-09<br />mean_cases:  14","date: 2010-05-16<br />mean_cases:  14","date: 2010-05-23<br />mean_cases:  11","date: 2010-05-30<br />mean_cases:  12","date: 2010-06-06<br />mean_cases:  12","date: 2010-06-13<br />mean_cases:  11","date: 2010-06-20<br />mean_cases:  12","date: 2010-06-27<br />mean_cases:  10","date: 2010-07-04<br />mean_cases:  11","date: 2010-07-11<br />mean_cases:  11","date: 2010-07-18<br />mean_cases:  11","date: 2010-07-25<br />mean_cases:  12","date: 2010-08-01<br />mean_cases:  11","date: 2010-08-08<br />mean_cases:  12","date: 2010-08-15<br />mean_cases:  14","date: 2010-08-22<br />mean_cases:  15","date: 2010-08-29<br />mean_cases:  19","date: 2010-09-05<br />mean_cases:  25","date: 2010-09-12<br />mean_cases:  27","date: 2010-09-19<br />mean_cases:  32","date: 2010-09-26<br />mean_cases:  27","date: 2010-10-03<br />mean_cases:  28","date: 2010-10-10<br />mean_cases:  25","date: 2010-10-17<br />mean_cases:  23","date: 2010-10-24<br />mean_cases:  23","date: 2010-10-31<br />mean_cases:  22","date: 2010-11-07<br />mean_cases:  23","date: 2010-11-14<br />mean_cases:  25","date: 2010-11-21<br />mean_cases:  28","date: 2010-11-28<br />mean_cases:  30","date: 2010-12-05<br />mean_cases:  35","date: 2010-12-12<br />mean_cases:  42","date: 2010-12-19<br />mean_cases:  48","date: 2010-12-26<br />mean_cases:  67","date: 2011-01-02<br />mean_cases: 105","date: 2011-01-09<br />mean_cases: 107","date: 2011-01-16<br />mean_cases:  97","date: 2011-01-23<br />mean_cases:  82","date: 2011-01-30<br />mean_cases:  91","date: 2011-02-06<br />mean_cases:  68","date: 2011-02-13<br />mean_cases:  53","date: 2011-02-20<br />mean_cases:  40","date: 2011-02-27<br />mean_cases:  34","date: 2011-03-06<br />mean_cases:  31","date: 2011-03-13<br />mean_cases:  33","date: 2011-03-20<br />mean_cases:  25","date: 2011-03-27<br />mean_cases:  21","date: 2011-04-03<br />mean_cases:  20","date: 2011-04-10<br />mean_cases:  17","date: 2011-04-17<br />mean_cases:  15","date: 2011-04-24<br />mean_cases:  12","date: 2011-05-01<br />mean_cases:  11","date: 2011-05-08<br />mean_cases:  13","date: 2011-05-15<br />mean_cases:  13","date: 2011-05-22<br />mean_cases:  13","date: 2011-05-29<br />mean_cases:  12","date: 2011-06-05<br />mean_cases:  12","date: 2011-06-12<br />mean_cases:  11","date: 2011-06-19<br />mean_cases:  13","date: 2011-06-26<br />mean_cases:  11","date: 2011-07-03<br />mean_cases:  12","date: 2011-07-10<br />mean_cases:  11","date: 2011-07-17<br />mean_cases:  11","date: 2011-07-24<br />mean_cases:  10","date: 2011-07-31<br />mean_cases:  10","date: 2011-08-07<br />mean_cases:  10","date: 2011-08-14<br />mean_cases:  12","date: 2011-08-21<br />mean_cases:  13","date: 2011-08-28<br />mean_cases:  14","date: 2011-09-04<br />mean_cases:  15","date: 2011-09-11<br />mean_cases:  16","date: 2011-09-18<br />mean_cases:  23","date: 2011-09-25<br />mean_cases:  24","date: 2011-10-02<br />mean_cases:  21","date: 2011-10-09<br />mean_cases:  23","date: 2011-10-16<br />mean_cases:  30","date: 2011-10-23<br />mean_cases:  33","date: 2011-10-30<br />mean_cases:  36","date: 2011-11-06<br />mean_cases:  44","date: 2011-11-13<br />mean_cases:  43","date: 2011-11-20<br />mean_cases:  49","date: 2011-11-27<br />mean_cases:  46","date: 2011-12-04<br />mean_cases:  43","date: 2011-12-11<br />mean_cases:  44","date: 2011-12-18<br />mean_cases:  37","date: 2011-12-25<br />mean_cases:  37","date: 2012-01-01<br />mean_cases:  35","date: 2012-01-08<br />mean_cases:  40","date: 2012-01-15<br />mean_cases:  42","date: 2012-01-22<br />mean_cases:  40","date: 2012-01-29<br />mean_cases:  44","date: 2012-02-05<br />mean_cases:  54","date: 2012-02-12<br />mean_cases:  66","date: 2012-02-19<br />mean_cases:  96","date: 2012-02-26<br />mean_cases:  87","date: 2012-03-04<br />mean_cases:  62","date: 2012-03-11<br />mean_cases:  47","date: 2012-03-18<br />mean_cases:  38","date: 2012-03-25<br />mean_cases:  29","date: 2012-04-01<br />mean_cases:  26","date: 2012-04-08<br />mean_cases:  26","date: 2012-04-15<br />mean_cases:  25","date: 2012-04-22<br />mean_cases:  22","date: 2012-04-29<br />mean_cases:  21","date: 2012-05-06<br />mean_cases:  20","date: 2012-05-13<br />mean_cases:  17","date: 2012-05-20<br />mean_cases:  16","date: 2012-05-27<br />mean_cases:  15","date: 2012-06-03<br />mean_cases:  16","date: 2012-06-10<br />mean_cases:  17","date: 2012-06-17<br />mean_cases:  19","date: 2012-06-24<br />mean_cases:  21","date: 2012-07-01<br />mean_cases:  20","date: 2012-07-08<br />mean_cases:  19","date: 2012-07-15<br />mean_cases:  23","date: 2012-07-22<br />mean_cases:  18","date: 2012-07-29<br />mean_cases:  18","date: 2012-08-05<br />mean_cases:  14","date: 2012-08-12<br />mean_cases:  14","date: 2012-08-19<br />mean_cases:  14","date: 2012-08-26<br />mean_cases:  18","date: 2012-09-02<br />mean_cases:  23","date: 2012-09-09<br />mean_cases:  28","date: 2012-09-16<br />mean_cases:  35","date: 2012-09-23<br />mean_cases:  44","date: 2012-09-30<br />mean_cases:  44","date: 2012-10-07<br />mean_cases:  43","date: 2012-10-14<br />mean_cases:  41","date: 2012-10-21<br />mean_cases:  34","date: 2012-10-28<br />mean_cases:  34","date: 2012-11-04<br />mean_cases:  36","date: 2012-11-11<br />mean_cases:  37","date: 2012-11-18<br />mean_cases:  41","date: 2012-11-25<br />mean_cases:  44","date: 2012-12-02<br />mean_cases:  45","date: 2012-12-09<br />mean_cases:  58","date: 2012-12-16<br />mean_cases:  81","date: 2012-12-23<br />mean_cases: 122","date: 2012-12-30<br />mean_cases: 134","date: 2013-01-06<br />mean_cases: 126","date: 2013-01-13<br />mean_cases: 127","date: 2013-01-20<br />mean_cases: 233","date: 2013-01-27<br />mean_cases: 270","date: 2013-02-03<br />mean_cases: 174","date: 2013-02-10<br />mean_cases: 172","date: 2013-02-17<br />mean_cases: 141","date: 2013-02-24<br />mean_cases: 107","date: 2013-03-03<br />mean_cases:  80","date: 2013-03-10<br />mean_cases:  60","date: 2013-03-17<br />mean_cases:  56","date: 2013-03-24<br />mean_cases:  48","date: 2013-03-31<br />mean_cases:  47","date: 2013-04-07<br />mean_cases:  43","date: 2013-04-14<br />mean_cases:  31","date: 2013-04-21<br />mean_cases:  24","date: 2013-04-28<br />mean_cases:  21","date: 2013-05-05<br />mean_cases:  19","date: 2013-05-12<br />mean_cases:  17","date: 2013-05-19<br />mean_cases:  16","date: 2013-05-26<br />mean_cases:  19","date: 2013-06-02<br />mean_cases:  20","date: 2013-06-09<br />mean_cases:  23","date: 2013-06-16<br />mean_cases:  19","date: 2013-06-23<br />mean_cases:  20","date: 2013-06-30<br />mean_cases:  20","date: 2013-07-07<br />mean_cases:  18","date: 2013-07-14<br />mean_cases:  18","date: 2013-07-21<br />mean_cases:  15","date: 2013-07-28<br />mean_cases:  16","date: 2013-08-04<br />mean_cases:  15","date: 2013-08-11<br />mean_cases:  17","date: 2013-08-18<br />mean_cases:  19","date: 2013-08-25<br />mean_cases:  22","date: 2013-09-01<br />mean_cases:  25","date: 2013-09-08<br />mean_cases:  28","date: 2013-09-15<br />mean_cases:  36","date: 2013-09-22<br />mean_cases:  39","date: 2013-09-29<br />mean_cases:  39","date: 2013-10-06<br />mean_cases:  32","date: 2013-10-13<br />mean_cases:  31","date: 2013-10-20<br />mean_cases:  32","date: 2013-10-27<br />mean_cases:  30","date: 2013-11-03<br />mean_cases:  35","date: 2013-11-10<br />mean_cases:  35","date: 2013-11-17<br />mean_cases:  42","date: 2013-11-24<br />mean_cases:  43","date: 2013-12-01<br />mean_cases:  41","date: 2013-12-08<br />mean_cases:  45","date: 2013-12-15<br />mean_cases:  41","date: 2013-12-22<br />mean_cases:  34","date: 2013-12-29<br />mean_cases:  40","date: 2014-01-05<br />mean_cases:  34","date: 2014-01-12<br />mean_cases:  35","date: 2014-01-19<br />mean_cases:  41","date: 2014-01-26<br />mean_cases:  43","date: 2014-02-02<br />mean_cases:  52","date: 2014-02-09<br />mean_cases:  48","date: 2014-02-16<br />mean_cases:  44","date: 2014-02-23<br />mean_cases:  46","date: 2014-03-02<br />mean_cases:  42","date: 2014-03-09<br />mean_cases:  38","date: 2014-03-16<br />mean_cases:  34","date: 2014-03-23<br />mean_cases:  34","date: 2014-03-30<br />mean_cases:  34","date: 2014-04-06<br />mean_cases:  30","date: 2014-04-13<br />mean_cases:  30","date: 2014-04-20<br />mean_cases:  35","date: 2014-04-27<br />mean_cases:  23","date: 2014-05-04<br />mean_cases:  21","date: 2014-05-11<br />mean_cases:  21","date: 2014-05-18<br />mean_cases:  19","date: 2014-05-25<br />mean_cases:  15","date: 2014-06-01<br />mean_cases:  17","date: 2014-06-08<br />mean_cases:  15","date: 2014-06-15<br />mean_cases:  17","date: 2014-06-22<br />mean_cases:  16","date: 2014-06-29<br />mean_cases:  17","date: 2014-07-06<br />mean_cases:  16","date: 2014-07-13<br />mean_cases:  14","date: 2014-07-20<br />mean_cases:  13","date: 2014-07-27<br />mean_cases:  15","date: 2014-08-03<br />mean_cases:  16","date: 2014-08-10<br />mean_cases:  16","date: 2014-08-17<br />mean_cases:  19","date: 2014-08-24<br />mean_cases:  25","date: 2014-08-31<br />mean_cases:  28","date: 2014-09-07<br />mean_cases:  31","date: 2014-09-14<br />mean_cases:  34","date: 2014-09-21<br />mean_cases:  32","date: 2014-09-28<br />mean_cases:  27","date: 2014-10-05<br />mean_cases:  29","date: 2014-10-12<br />mean_cases:  31","date: 2014-10-19<br />mean_cases:  27","date: 2014-10-26<br />mean_cases:  29","date: 2014-11-02<br />mean_cases:  30","date: 2014-11-09<br />mean_cases:  32","date: 2014-11-16<br />mean_cases:  34","date: 2014-11-23<br />mean_cases:  34","date: 2014-11-30<br />mean_cases:  40","date: 2014-12-07<br />mean_cases:  57","date: 2014-12-14<br />mean_cases:  78","date: 2014-12-21<br />mean_cases:  82","date: 2014-12-28<br />mean_cases:  90","date: 2015-01-04<br />mean_cases: 102","date: 2015-01-11<br />mean_cases:  98","date: 2015-01-18<br />mean_cases: 119","date: 2015-01-25<br />mean_cases: 146","date: 2015-02-01<br />mean_cases: 158","date: 2015-02-08<br />mean_cases: 193","date: 2015-02-15<br />mean_cases: 138","date: 2015-02-22<br />mean_cases: 103","date: 2015-03-01<br />mean_cases:  72","date: 2015-03-08<br />mean_cases:  59","date: 2015-03-15<br />mean_cases:  48","date: 2015-03-22<br />mean_cases:  44","date: 2015-03-29<br />mean_cases:  38","date: 2015-04-05<br />mean_cases:  37","date: 2015-04-12<br />mean_cases:  31","date: 2015-04-19<br />mean_cases:  25","date: 2015-04-26<br />mean_cases:  25","date: 2015-05-03<br />mean_cases:  22","date: 2015-05-10<br />mean_cases:  16","date: 2015-05-17<br />mean_cases:  17","date: 2015-05-24<br />mean_cases:  16","date: 2015-05-31<br />mean_cases:  17","date: 2015-06-07<br />mean_cases:  17","date: 2015-06-14<br />mean_cases:  16","date: 2015-06-21<br />mean_cases:  16","date: 2015-06-28<br />mean_cases:  13","date: 2015-07-05<br />mean_cases:  14","date: 2015-07-12<br />mean_cases:  16","date: 2015-07-19<br />mean_cases:  13","date: 2015-07-26<br />mean_cases:  13","date: 2015-08-02<br />mean_cases:  12","date: 2015-08-09<br />mean_cases:  12"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":43.1050228310502},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"flu cases over time in the netherlands","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[11819.7,16886.3],"tickmode":"array","ticktext":["2005","2010","2015"],"tickvals":[12784,14610,16436],"categoryorder":"array","categoryarray":["2005","2010","2015"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-3,283],"tickmode":"array","ticktext":["0","100","200"],"tickvals":[0,100,200],"categoryorder":"array","categoryarray":["0","100","200"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"cases","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"22e073f21e75":{"x":{},"y":{},"type":"scatter"}},"cur_data":"22e073f21e75","visdat":{"22e073f21e75":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="8-sql-data-analysis.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># string naar date veranderen</span></span>
<span id="cb82-2"><a href="8-sql-data-analysis.html#cb82-2" aria-hidden="true" tabindex="-1"></a>gapminder_flu<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(gapminder_flu<span class="sc">$</span>date)</span>
<span id="cb82-3"><a href="8-sql-data-analysis.html#cb82-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-4"><a href="8-sql-data-analysis.html#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="co"># nieuw object maken waar het gemmidelde cases is berekend in 2015 in europa</span></span>
<span id="cb82-5"><a href="8-sql-data-analysis.html#cb82-5" aria-hidden="true" tabindex="-1"></a>country_cases <span class="ot">&lt;-</span> gapminder_flu <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">between</span>(date, <span class="fu">as.Date</span>(<span class="st">&quot;2015-01-01&quot;</span>), <span class="fu">as.Date</span>(<span class="st">&quot;2015-12-30&quot;</span>))) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">&quot;Europe&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">mean_cases=</span><span class="fu">mean</span>(<span class="fu">as.numeric</span>(cases)))</span>
<span id="cb82-6"><a href="8-sql-data-analysis.html#cb82-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-7"><a href="8-sql-data-analysis.html#cb82-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot maken</span></span>
<span id="cb82-8"><a href="8-sql-data-analysis.html#cb82-8" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span>country_cases <span class="sc">%&gt;%</span></span>
<span id="cb82-9"><a href="8-sql-data-analysis.html#cb82-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> country, <span class="at">y =</span> mean_cases, <span class="at">fill =</span> country_cases<span class="sc">$</span>country)) <span class="sc">+</span></span>
<span id="cb82-10"><a href="8-sql-data-analysis.html#cb82-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb82-11"><a href="8-sql-data-analysis.html#cb82-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb82-12"><a href="8-sql-data-analysis.html#cb82-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb82-13"><a href="8-sql-data-analysis.html#cb82-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Average flu cases per europian country in 2015&quot;</span></span>
<span id="cb82-14"><a href="8-sql-data-analysis.html#cb82-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb82-15"><a href="8-sql-data-analysis.html#cb82-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-16"><a href="8-sql-data-analysis.html#cb82-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot in een plotly veranderen</span></span>
<span id="cb82-17"><a href="8-sql-data-analysis.html#cb82-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(graph)</span></code></pre></div>
<div id="htmlwidget-ac223783d3f3ed023412" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ac223783d3f3ed023412">{"x":{"data":[{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[1254.46875],"text":"country: Austria<br />mean_cases: 1254.4688<br />country_cases$country: Austria","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Austria","legendgroup":"Austria","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[2],"y":[347.21875],"text":"country: Belgium<br />mean_cases:  347.2188<br />country_cases$country: Belgium","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(229,135,0,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Belgium","legendgroup":"Belgium","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[3],"y":[517.78125],"text":"country: Bulgaria<br />mean_cases:  517.7812<br />country_cases$country: Bulgaria","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(201,152,0,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Bulgaria","legendgroup":"Bulgaria","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[336.25],"text":"country: France<br />mean_cases:  336.2500<br />country_cases$country: France","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"France","legendgroup":"France","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[889.15625],"text":"country: Germany<br />mean_cases:  889.1562<br />country_cases$country: Germany","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(107,177,0,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Germany","legendgroup":"Germany","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[6],"y":[190.5625],"text":"country: Hungary<br />mean_cases:  190.5625<br />country_cases$country: Hungary","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Hungary","legendgroup":"Hungary","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[7],"y":[52.0625],"text":"country: Netherlands<br />mean_cases:   52.0625<br />country_cases$country: Netherlands","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Netherlands","legendgroup":"Netherlands","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[8],"y":[127.9375],"text":"country: Norway<br />mean_cases:  127.9375<br />country_cases$country: Norway","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,192,175,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Norway","legendgroup":"Norway","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[9],"y":[61.125],"text":"country: Poland<br />mean_cases:   61.1250<br />country_cases$country: Poland","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,188,216,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Poland","legendgroup":"Poland","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[10],"y":[739.96875],"text":"country: Romania<br />mean_cases:  739.9688<br />country_cases$country: Romania","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Romania","legendgroup":"Romania","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[11],"y":[670.21875],"text":"country: Russia<br />mean_cases:  670.2188<br />country_cases$country: Russia","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Russia","legendgroup":"Russia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[12],"y":[151.96875],"text":"country: Spain<br />mean_cases:  151.9688<br />country_cases$country: Spain","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(185,131,255,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Spain","legendgroup":"Spain","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[13],"y":[10.25],"text":"country: Sweden<br />mean_cases:   10.2500<br />country_cases$country: Sweden","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(231,107,243,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Sweden","legendgroup":"Sweden","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[14],"y":[199.6875],"text":"country: Switzerland<br />mean_cases:  199.6875<br />country_cases$country: Switzerland","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(253,97,209,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Switzerland","legendgroup":"Switzerland","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[15],"y":[378.15625],"text":"country: Ukraine<br />mean_cases:  378.1562<br />country_cases$country: Ukraine","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,103,164,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Ukraine","legendgroup":"Ukraine","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":92.7853881278539,"l":48.9497716894977},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Average flu cases per europian country in 2015","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,15.6],"tickmode":"array","ticktext":["Austria","Belgium","Bulgaria","France","Germany","Hungary","Netherlands","Norway","Poland","Romania","Russia","Spain","Sweden","Switzerland","Ukraine"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],"categoryorder":"array","categoryarray":["Austria","Belgium","Bulgaria","France","Germany","Hungary","Netherlands","Norway","Poland","Romania","Russia","Spain","Sweden","Switzerland","Ukraine"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-90,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"country","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-62.7234375,1317.1921875],"tickmode":"array","ticktext":["0","400","800","1200"],"tickvals":[0,400,800,1200],"categoryorder":"array","categoryarray":["0","400","800","1200"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"mean_cases","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"country_cases$country","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"22e079081e5e":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"22e079081e5e","visdat":{"22e079081e5e":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="8-sql-data-analysis.html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># string naar date veranderen</span></span>
<span id="cb83-2"><a href="8-sql-data-analysis.html#cb83-2" aria-hidden="true" tabindex="-1"></a>gapminder_flu<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(gapminder_flu<span class="sc">$</span>date)</span>
<span id="cb83-3"><a href="8-sql-data-analysis.html#cb83-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-4"><a href="8-sql-data-analysis.html#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="co"># nieuw object maken waar het gemmidelde life_expectancy is berekend in 2015 in europa</span></span>
<span id="cb83-5"><a href="8-sql-data-analysis.html#cb83-5" aria-hidden="true" tabindex="-1"></a>country_life <span class="ot">&lt;-</span> gapminder_flu <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">between</span>(date, <span class="fu">as.Date</span>(<span class="st">&quot;2015-01-01&quot;</span>), <span class="fu">as.Date</span>(<span class="st">&quot;2015-12-30&quot;</span>))) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">&quot;Europe&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">mean_cases=</span><span class="fu">mean</span>(<span class="fu">as.numeric</span>(life_expectancy)))</span>
<span id="cb83-6"><a href="8-sql-data-analysis.html#cb83-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-7"><a href="8-sql-data-analysis.html#cb83-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot maken</span></span>
<span id="cb83-8"><a href="8-sql-data-analysis.html#cb83-8" aria-hidden="true" tabindex="-1"></a>graph_life <span class="ot">&lt;-</span>country_life <span class="sc">%&gt;%</span></span>
<span id="cb83-9"><a href="8-sql-data-analysis.html#cb83-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> country, <span class="at">y =</span> mean_cases, <span class="at">fill =</span> country_cases<span class="sc">$</span>country)) <span class="sc">+</span></span>
<span id="cb83-10"><a href="8-sql-data-analysis.html#cb83-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb83-11"><a href="8-sql-data-analysis.html#cb83-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb83-12"><a href="8-sql-data-analysis.html#cb83-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb83-13"><a href="8-sql-data-analysis.html#cb83-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Average life expectancy per europian country in 2015&quot;</span></span>
<span id="cb83-14"><a href="8-sql-data-analysis.html#cb83-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb83-15"><a href="8-sql-data-analysis.html#cb83-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-16"><a href="8-sql-data-analysis.html#cb83-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot in een plotly veranderen</span></span>
<span id="cb83-17"><a href="8-sql-data-analysis.html#cb83-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(graph_life)</span></code></pre></div>
<div id="htmlwidget-8aa50983654c06c780bf" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-8aa50983654c06c780bf">{"x":{"data":[{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[75.0864912280702],"text":"country: Austria<br />mean_cases: 75.08649<br />country_cases$country: Austria","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Austria","legendgroup":"Austria","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[2],"y":[75.211052631579],"text":"country: Belgium<br />mean_cases: 75.21105<br />country_cases$country: Belgium","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(229,135,0,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Belgium","legendgroup":"Belgium","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[3],"y":[71.7305263157895],"text":"country: Bulgaria<br />mean_cases: 71.73053<br />country_cases$country: Bulgaria","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(201,152,0,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Bulgaria","legendgroup":"Bulgaria","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[76.3956140350877],"text":"country: France<br />mean_cases: 76.39561<br />country_cases$country: France","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"France","legendgroup":"France","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[75.2178947368421],"text":"country: Germany<br />mean_cases: 75.21789<br />country_cases$country: Germany","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(107,177,0,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Germany","legendgroup":"Germany","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[6],"y":[70.9298245614035],"text":"country: Hungary<br />mean_cases: 70.92982<br />country_cases$country: Hungary","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Hungary","legendgroup":"Hungary","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[7],"y":[76.8394736842105],"text":"country: Netherlands<br />mean_cases: 76.83947<br />country_cases$country: Netherlands","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Netherlands","legendgroup":"Netherlands","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[8],"y":[77.1149122807018],"text":"country: Norway<br />mean_cases: 77.11491<br />country_cases$country: Norway","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,192,175,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Norway","legendgroup":"Norway","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[9],"y":[72.2287719298246],"text":"country: Poland<br />mean_cases: 72.22877<br />country_cases$country: Poland","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,188,216,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Poland","legendgroup":"Poland","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[10],"y":[70.4257894736842],"text":"country: Romania<br />mean_cases: 70.42579<br />country_cases$country: Romania","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Romania","legendgroup":"Romania","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[11],"y":[68.0747368421053],"text":"country: Russia<br />mean_cases: 68.07474<br />country_cases$country: Russia","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Russia","legendgroup":"Russia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[12],"y":[76.4936842105263],"text":"country: Spain<br />mean_cases: 76.49368<br />country_cases$country: Spain","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(185,131,255,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Spain","legendgroup":"Spain","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[13],"y":[77.521052631579],"text":"country: Sweden<br />mean_cases: 77.52105<br />country_cases$country: Sweden","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(231,107,243,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Sweden","legendgroup":"Sweden","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[14],"y":[77.37],"text":"country: Switzerland<br />mean_cases: 77.37000<br />country_cases$country: Switzerland","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(253,97,209,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Switzerland","legendgroup":"Switzerland","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[15],"y":[69.6340350877193],"text":"country: Ukraine<br />mean_cases: 69.63404<br />country_cases$country: Ukraine","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,103,164,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Ukraine","legendgroup":"Ukraine","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":92.7853881278539,"l":37.2602739726027},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Average life expectancy per europian country in 2015","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,15.6],"tickmode":"array","ticktext":["Austria","Belgium","Bulgaria","France","Germany","Hungary","Netherlands","Norway","Poland","Romania","Russia","Spain","Sweden","Switzerland","Ukraine"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],"categoryorder":"array","categoryarray":["Austria","Belgium","Bulgaria","France","Germany","Hungary","Netherlands","Norway","Poland","Romania","Russia","Spain","Sweden","Switzerland","Ukraine"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-90,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"country","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-3.87605263157895,81.3971052631579],"tickmode":"array","ticktext":["0","20","40","60","80"],"tickvals":[0,20,40,60,80],"categoryorder":"array","categoryarray":["0","20","40","60","80"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"mean_cases","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"country_cases$country","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"22e0556e6dd8":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"22e0556e6dd8","visdat":{"22e0556e6dd8":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>

</div>
<p style="text-align: center;">
<a href="7-plan-for-learning-on-my-own.html"><button class="btn btn-default">Previous</button></a>
<a href="9-package-creation.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
